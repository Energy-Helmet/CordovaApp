<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Watson Speech to Text client example</title>
</head>
<body>
<section>
    <h2>Transcribe from Microphone</h2>
    <button id="button">Start Microphone Transcription</button>
    <button id="stop">Stop</button>
    <h2>Output:</h2>
    <div id="output">--</div>
    <div id="output_interim">--</div>
</section>
<script src="vendor/js/watson-speech.js"></script>
<!-- window.fetch pollyfill for IE/Edge & Older Chrome/FireFox -->
<script src="vendor/js/bower_components/fetch/fetch.js"></script>
<h2>Code for this demo:</h2>
<pre><code><script style="display: block;">
document.querySelector('#button').onclick = function () {
/*
  fetch('https://stream.watsonplatform.net/api/speech-to-text/HJYiR26N43NU%2F0JcM7dGwvH5lc7mxshywRAKqGl2x9LGjiw5kI3GxS5wdyr%2BPe2Et4y2lQM%2BRF7NDRol4hqAe9OJYsUDoa%2F9bPcmTMTv4qQaEBo9rKIx9paxNSe5pxqnAIKghZMDsqmd2uPW%2Bhn8dNSHz06KNtx5tg5IiptUH%2FNbu%2F7K8zA6LqZ7ptCJifMkhDQKH596nCVKXd8b23LIReBiahful%2BXvAWFhB4YhTcxzsTRTbKE5svh5PEvMqow2vO%2Fem7ttYJxgXV3R6yggUTvUw3Fua0zZUn1LXsjnHT%2BqU8MxDbERedCZUC9rmqeZGG1LRkaav2W8JdhvUhyYXi5EIrbz53TxVUHkJRfbqwC03Mleiw9YIgdaRxKzUxA5w4SQE%2Bv55TNGojQ9WF2z%2B3U1RG9DNB7yR8%2BXQdL8amyivwBbIIn%2FR338EznKSphkrWuEOY7S4L18FC4nrT4Hut9sv1wN9Wpv9%2FMyDSaBcdze5YWp%2FEUj2Cf4mw0jNL2FKAr0q4tCaP423tgKQop0ICwcrXTA19Mpqap1lKhBSSQHSrgemeT%2BqamfwyslCI7su26QjUvoKSd0HX1OysFM7RzG%2FCLSXhRSnXZU2ogxIne%2BXwgcuCDwZ%2FAN39b7HcOEdxcQwxSdLLnssBQkuwNCrgZtHpuZSgQ31IxTkP9Xi0w7UQIqu7x7m2VfQeHo4QW8mU97pjvuJ9dJKc7cPtlsQJa22fFG8nU6pAeB5HwCJhM%2FUiZmKpVgi7Emjx4rUm6y5Clofsxp9MVLIBBIVy0UJgduV%2FpJI39w%2Bg3C8YlQJW14EkGJTGwtoQhAhoGNNR0aQDiCUBwleSOIas2V1fcEUfwVarXDT9zZ')
  .then(function(response) {
      return response.text();
  }).then(function (token) {
    */
    var stream = WatsonSpeech.SpeechToText.recognizeMicrophone({
        token: "oU7fkMY7OXQkXxwZ06J0zcFXRYv9a%2FEhipramQ4PudzkE%2BxXRj9YFd0iFiJ8%2BvNfeJlngeSxrmBp6QiuvnPGrg2%2F6r8lhZJgUVZyM7fqjM5pJQ1F1MepmlZYpR6NfGsi4TegD9qOJcp14Zi4T9paV8SflJxHOAwhZ2TViWqfKOY3d%2Bw8E12ldhIdJCaFMuS6T1M2ptmPRka5h8fL%2Fbse8gGzIqgnfm9YoB41Jjx%2FsVFQsVbOv2IrwlAYfJXivOxMFESXaWq6u39XRrrD7u5Ugxp8vSTN2z0qOjLtGttoxh5qYt2bxL1otdubHKSXg%2B2MhW4lu8ZpAyA74U%2FIr7cXK2UD0besTiV9TJ%2BNiZhPwGhjG8WhBDdeMXtjEQgEDrslSpRpt5zwllk5LXuWgIXilEmeZ5SnP12USfZjMgVXHz6tehTMh7tcM45EkYIkQlF7rwxBf1lWjfoDKrmKJZz%2BRvJ%2FuVkVTqL7UUMLEDaAMX6v9PQuv20h4VJjQ1orGrTkV1vZ1roxmGl%2FoUFvYigO6NHWUV0opYdm0QiOcil669plBoQYG6ltlwH%2B%2F%2FaHdZiDpMMAfWfgCiM03Hq%2Brd3a3uZSdy%2BMGngNwagDlNw3IQ%2BBU90KWe3Olgq7U3wvWYvJhycNZf%2B6y5nsea9oDt8IgMkGejnaPKAWcfSCBRM1uDE6itnQgStejrjNwvbeEHhpxyx47G33YI5O5kOD3JySESvtj8j54lRNhGy4hl%2FOcdS2Wo1PJA0PX0v5tex8VADY6O%2BgckGPU%2BoaNIgM698RpDKQe0ourjzt%2FdwAMlzVjsJQND%2FGFsCpDKiMbDLhI9NnORTkQaTCW61fdIZCYMWgvwVaaekbLS%2BA",
        outputElement: '#output' // CSS selector or DOM Element
    });
    
    stream.on('error', function(err) {
        console.log(err);
    });
    stream.on('data', function(data) {
        console.log(data);
    });
    document.querySelector('#stop').onclick = stream.stop.bind(stream);
/*
  }).catch(function(error) {
      console.log(error);
  });
*/
};
</script></code></pre>
</body>
</html>